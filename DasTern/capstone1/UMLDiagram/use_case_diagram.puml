@startuml
!theme vibrant
skinparam backgroundColor #FEFEFE
skinparam actorStyle awesome
skinparam packageStyle rectangle

title DasTern System - Use Case Diagram

left to right direction

actor Patient as patient #LightBlue
actor "Family Member" as family #LightGreen
actor Doctor as doctor #LightCoral
actor "OCR System" as ocr #LightYellow
actor "Telegram Bot" as telegram #LightPink

rectangle "DasTern Mobile Application" {
  
  package "Patient Features" #AliceBlue {
    usecase (Register and Login) as UC1
    usecase (Scan Prescription) as UC2
    usecase (Extract Medication Data) as UC3
    usecase (Edit Medication Details) as UC4
    usecase (Generate Reminder Schedule) as UC5
    usecase (Receive Notifications) as UC6
    usecase (Voice Reminder) as UC7
    usecase (View Medication History) as UC8
    usecase (Offline Access) as UC9
    usecase (Notification Control) as UC10
    usecase (Set Meal Times) as UC11
  }
  
  package "Doctor Features" #LightYellow {
    usecase (View Patient List) as UC12
    usecase (Create Prescription) as UC13
    usecase (View Patient Records) as UC14
    usecase (Monitor Adherence) as UC15
  }
  
  package "Family Features" #LightGreen {
    usecase (Link to Patient) as UC16
    usecase (View Patient Status) as UC17
    usecase (Receive Alerts) as UC18
    usecase (View Medication Log) as UC19
  }
  
  package "System Features" #LightGray {
    usecase (Process OCR) as UC20
    usecase (Enhance Text with AI) as UC21
    usecase (Send Telegram Notification) as UC22
    usecase (Schedule Reminders) as UC23
  }
}

' Patient relationships
patient --> UC1
patient --> UC2
patient --> UC4
patient --> UC6
patient --> UC7
patient --> UC8
patient --> UC9
patient --> UC10
patient --> UC11

' Doctor relationships
doctor --> UC12
doctor --> UC13
doctor --> UC14
doctor --> UC15

' Family relationships
family --> UC16
family --> UC17
family --> UC18
family --> UC19

' System relationships
UC2 ..> UC20 : <<include>>
UC20 ..> UC3 : <<include>>
UC3 ..> UC21 : <<include>>
UC11 ..> UC5 : <<include>>
UC3 ..> UC5 : <<include>>
UC5 ..> UC23 : <<include>>
UC6 ..> UC22 : <<extend>>
UC18 ..> UC22 : <<include>>

' External system interactions
ocr --> UC20
telegram --> UC22

' Notes
note right of UC2
  Uses device camera
  to capture prescription
end note

note right of UC3
  Automatic extraction
  using OCR + AI
end note

note right of UC7
  Khmer Text-to-Speech
  for accessibility
end note

note bottom of UC22
  Optional notifications
  for family monitoring
end note

@enduml